
用手工编织一本书的目录和交叉索引例子，介绍连接器的工作原理

假设一个作者写完额10几个章节，你的任务是把章节编辑为一本书。每个章节的篇幅不等，从30页到80页不相等。

章节之间有交叉引用，正文里会出现请参考。。页的第。。节等字样。作者在编写每个章节的事后，不知道当前章节的字节号，当然也不知道
当前的文字未来会出现在哪一页。当然他可以随时增减文字内容，调节章节顺序，这些操作都会影响。为了引用其他章节内容，作者会在文字上
放锚点，比方说本章节“c++编译连接模型精要”的名字是ch:cppCompilation（这就好比给全局函数或者变量起一个独一无二的名字）。在引用其他章节时候，
作者在正文中留下一个适当的空白，并且注明这里应该填上的页码和章节编号。

现在你拿到了10几摞打印的文稿，怎么把他编成一本书呢？你可能会想到下面这两个步骤：先编排页码和章节编号，再解决交叉引用。第一步：

1a.把这些文稿按照先后顺序折叠好，这样就可以统一正文页码了。
1b.在编制页码的同时，章节号也一并确定下来了 

在进行1a和1b的步骤的时候，你可以同时顺序记录两张纸。

章节的编号、标题和它出现的页码，用于编制目录

遇到锚点的时候，记下他的名字和出现的页码、章节号，用于解决交叉引用。

按照上面的操作解决交叉引用不难


2.再从头翻一遍书籍，遇到空白则交叉应用，就到anchor索引表里查出它的页码和章节号，填上空白

如果一切顺利的话，书籍的编辑任务就这样完成了。请读者思考为什么页码用阿拉伯数字，而前言和目录的页码用罗马数字？如果整本书从头到尾连续编排页码，手工处理会遇到什么困难？

1.正文交叉应用找不到锚点，空白填不上怎么办？

2。某一个锚点被多次定义，选哪一个填到交叉引用的空白处

还有一种方法是将锚点 单独记录到一张纸上，碰到锚点就去那张纸上看下有没有，如果又就往回翻到空白的页码，把空白填上，回头继续编制章节和页码，这样一遍扫描下来就全有了，这就是传统的one-pass连接器。

one-pass模式越基础的库，越要放到后面，这么做可以减少内存开销，如果c 是基础库,AB是应用的，那么是ABC或者BAC。

原因是如果先处理应用库，只需要记住多少个符号没有查到就可以了。连接器的消耗跟外部符号的多少成正比。

name mangling 的用法不需要程序员关心，只要掌握extenrn C的用法

c语言通常在一个符号程序中只能有一处定义。
