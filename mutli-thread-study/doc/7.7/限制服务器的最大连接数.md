#7.7 限制服务器的最大连接数

为什么要限制最大的并发数目?

其实跟书中一样我也经常会遇到这种情况 accept的时候描述符被用光了，这是一个十分头疼的问题，accept 返回EMFILE我们该如何处理呢？既然有socket
文件描述符来标识他，我们就无法close他。程序继续运行，我们调用epoll-wait会立即返回，于是程序陷入了busy-loop中，cpu接近了100%

其实也是传说中的c10K,C100K等问题，我们有下面的做法

1.调高最大链接数目 显然是治标不治本的

2.死等，鸵鸟算法

3.退出程序

4.关闭listen_fd

5.改用边缘触发

其实在这里我不认为对边缘触发如狼似虎的看待，我认为边缘触发也是很不错的

那么muduo中是如何限制并发的呢？

muduo是在onConnect的时候检查当前活跃的最大链接数目，如果超过了则踢掉他