# 内容介绍

这篇笔记学习自陈硕先生的 c++ 多线程服务器编程

陈硕先生在书籍开篇用这个例子说了，c++多线程服务器编程中，对对象生命周期的管理是一个十分重要的事情

点出了不要在析构函数中泄露this指针，对象的销毁在多线程中是十分困难的，不要去自己管理对象，指针

这一个demo 在test.cpp中，这是一个单线程（只有一个线程去实现一个对象的观察者模式），实现观察者模式是没有问题的

在test_thread.cc中，这是一个多线程，实现观察者模式确实会出现问题的

出现问题的原因：

在一个线程还没来的及unregister_的时候，另一个线程就已经去notifyObservers了，这样可能会导致内存安全问题，coredump恐怕是最好的回应了

####实验现象：

test_thread.cc 中我们把sum调整到  1 的时候程序正常退出

但是当我们做压力测试，把sum=1000000的时候程序core dump掉了