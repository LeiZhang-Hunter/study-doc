内核中的调试支持

内核中的几个选项

CONFIG_DEBUG_KERNEL

这个选项仅仅是其他调试选项可用。我们应该打开这个选项，但是它本身不会打开所有的调试功能。

CONFIG_DEBUG_SLAB

这是一个十分重要的选项，打开了内核内存分配函数中的多个类型检查；打开检查后，就可检查许多内存溢出
以及忘记初始化的错误。在将已经分配内存返回给调用者之前，内核将他的每个字节设置为0xa5，而在释放之后
将他设置为0x6b。如果读者在自己的驱动程序中，或者在oops信息中查看到毒剂字符串，则可以轻松判断位置所在。
在打开这个调试选项之后，内核会为对象分配的前面和后面加入防护值，这样防护值发生变化的时候，内核就会知道
哪些代码超出了内存的正常访问范围

CONFIG_DEBUG_PAGEALLOC

在释放的时候，全部内存页将从内核地址空间移出。这个选项会大大降低运行效率，但可以定位内存损坏的位置。

CONFIG_DEBUG_SPINLOCK

打开这个选项，内核将会捕获对未初始化自旋锁，也会捕获两次解开同一个锁的错误。

CONFIG_DEBUG_SPINLOCK_SLEEP

这个选项将拥有自旋锁时的休眠企图。

CONFIG_INIT_DEBUG
标记为__init的符号将会在系统初始化或者模块卸载之后被丢弃。这个选项可以用来检测初始化完成之后
对用于初始化内存空间的访问企图

CONFIG_DEBUG_INFO

这个选项让内核的构造包含完整的调试信息。如果利用gdb调试，应该打开CONFIG_FRAME_POINTER选项。

CONFIG_INIT_SYSRQ

打开sysRq魔法按键。

CONFIG_DEBUG_STACKOVERFLOW
CONFIG_DEBUG_STACK_USAGE

这个选项用来帮助定位内核栈溢出问题。


CONFIG_KALLSYMS

这个选项出现在一般设置、标准功能菜单中；这个选项默认是打开的。这个符号信息用来调试上下文；没有
这个符号，oops清单只给出十六进制的内核反向跟踪信息，这通常没有多少用处。

CONFIG_IKCONFIG
CONFIG_IKCONFIG_PROC

这些选项出现在一般设置的菜单中，会让内核配置状态包含到内核中，并且通过/proc访问。大多数内核开发
者清楚的知道自己的使用的配置，因此不是很需要这两个选项，如果内核是被其他人构建的那么我想你是需要的。

CONFIG_ACPI_DEBUG

这个选项出现在电源管理、ACPI中。如果怀疑自己遇到的问题和ACPI有关，打开这个选项。

CONFIG_DEBUG_DRIVER
在设备驱动菜单中，他会打开驱动程序核心调试信息。

CONFIG_SCSI_CONSTANTS

打开详细的SCSI错误信息，如果写SCSI驱动程序，可以打开这个选项。

CONFIG_INPUT_EVBUG

打开输入设备的详细输入事件记录，如果读者要针对输入设备编写驱动程序，可以使用这个选项。

CONFIG_PROFILING

剖析支持的菜单中找到，通常用来调试性能。